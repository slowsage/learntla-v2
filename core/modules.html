
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Modules &#8212; Learn TLA+</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/js/theme.js"></script>
    <script src="../_static/js/petite-vue.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Next Steps" href="next-steps.html" />
    <link rel="prev" title="TLA+" href="tla.html" /> 
  </head><body data-dark_mode_code_blocks="true">

<div id="top_nav">
    

    <nav>
        
            
        

        <p id="toggle_sidebar">
            <a href="#" title="Toggle sidebar">|||</a>
        </p>
        <h1><a href="../index.html" title="Go to homepage">Learn TLA+</a></h1>

        <a id="mode_toggle" href="#" @click.prevent="handleClick" :title="mode">
    <template v-if="mode == 'light'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_light"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><circle cx="39.311" cy="39.524" r="15.734" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.212,4.901c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901l-0,9.614c-0,2.705 2.196,4.901 4.9,4.901c2.705,0 4.901,-2.196 4.901,-4.901l0,-9.614Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M67.48,18.073c1.913,-1.912 1.913,-5.018 0,-6.931c-1.912,-1.912 -5.018,-1.912 -6.931,0l-6.798,6.799c-1.912,1.912 -1.912,5.018 0,6.931c1.913,1.912 5.018,1.912 6.931,-0l6.798,-6.799Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.728,61.108c1.912,-1.913 1.912,-5.018 -0,-6.931c-1.913,-1.913 -5.019,-1.913 -6.931,-0l-6.799,6.798c-1.912,1.913 -1.912,5.019 0,6.931c1.913,1.913 5.019,1.913 6.931,0l6.799,-6.798Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.682,54.177c-1.913,-1.913 -5.018,-1.913 -6.931,-0c-1.912,1.913 -1.912,5.018 0,6.931l6.798,6.798c1.913,1.913 5.019,1.913 6.931,0c1.913,-1.912 1.913,-5.018 0,-6.931l-6.798,-6.798Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M4.901,34.623c-2.705,0 -4.901,2.196 -4.901,4.901c0,2.705 2.196,4.901 4.901,4.901l9.614,0c2.705,0 4.901,-2.196 4.901,-4.901c0,-2.705 -2.196,-4.901 -4.901,-4.901l-9.614,0Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.212,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901l-0,9.614c-0,2.705 2.196,4.901 4.9,4.901c2.705,-0 4.901,-2.196 4.901,-4.901l0,-9.614Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M18.929,11.142c-1.912,-1.912 -5.018,-1.912 -6.931,0c-1.912,1.913 -1.912,5.019 0,6.931l6.799,6.799c1.912,1.912 5.018,1.912 6.931,-0c1.912,-1.913 1.912,-5.019 -0,-6.931l-6.799,-6.799Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.108,34.623c-2.705,0 -4.901,2.196 -4.901,4.901c-0,2.705 2.196,4.901 4.901,4.901l9.614,0c2.705,0 4.901,-2.196 4.901,-4.901c-0,-2.705 -2.196,-4.901 -4.901,-4.901l-9.614,0Z" style="fill:#fff;"/></g></g></g></svg>
    </template>

    <template v-if="mode == 'dark'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_dark"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><circle cx="39.311" cy="39.524" r="15.734" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.212,14.515c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,0 -4.901,2.196 -4.901,4.901c0,2.705 2.197,4.901 4.901,4.901c2.705,0 4.901,-2.196 4.901,-4.901Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M60.662,24.892c1.902,-1.902 1.902,-4.99 0,-6.892l-0.04,-0.039c-1.901,-1.902 -4.989,-1.902 -6.891,-0c-1.901,1.901 -1.901,4.989 0,6.891l0.04,0.04c1.902,1.901 4.989,1.901 6.891,-0Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.732,61.103c1.91,-1.91 1.91,-5.011 0,-6.921l-0.009,-0.01c-1.91,-1.91 -5.012,-1.91 -6.921,-0c-1.91,1.91 -1.91,5.011 -0,6.921l0.01,0.01c1.909,1.91 5.011,1.91 6.92,-0Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.672,54.167c-1.907,-1.907 -5.004,-1.907 -6.911,0l-0.02,0.02c-1.907,1.907 -1.907,5.004 0,6.911c1.907,1.907 5.004,1.907 6.911,-0l0.02,-0.02c1.907,-1.907 1.907,-5.004 0,-6.911Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M14.52,34.623c-2.702,0 -4.896,2.194 -4.896,4.896l0,0.01c0,2.702 2.194,4.896 4.896,4.896c2.702,0 4.896,-2.194 4.896,-4.896l-0,-0.01c-0,-2.702 -2.194,-4.896 -4.896,-4.896Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.212,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.901,2.196 -4.901,4.901c0,2.704 2.197,4.9 4.901,4.9c2.705,0 4.901,-2.196 4.901,-4.9Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M25.73,17.943c-1.911,-1.911 -5.015,-1.911 -6.926,0l-0.005,0.005c-1.911,1.911 -1.911,5.015 0,6.926c1.911,1.911 5.015,1.911 6.926,0l0.005,-0.005c1.911,-1.911 1.911,-5.014 -0,-6.926Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.098,34.623c-2.699,0 -4.891,2.192 -4.891,4.892l-0,0.019c-0,2.699 2.192,4.891 4.891,4.891c2.7,0 4.892,-2.192 4.892,-4.891l0,-0.019c0,-2.7 -2.192,-4.892 -4.892,-4.892Z" style="fill:#fff;"/></g></g></g></svg>
    </template>

    <template v-if="mode == 'darkest'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_darkest"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><path d="M39.315,23.791c8.684,-0 15.734,7.05 15.734,15.733c0,8.684 -7.05,15.734 -15.734,15.734c-8.683,0 -15.733,-7.05 -15.733,-15.734c-0,-8.683 7.05,-15.733 15.733,-15.733Zm0,4.737c6.069,0 10.997,4.927 10.997,10.996c-0,6.069 -4.928,10.996 -10.997,10.996c-6.068,0 -10.996,-4.927 -10.996,-10.996c0,-6.069 4.928,-10.996 10.996,-10.996Z" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.216,14.515c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,0 -4.9,2.196 -4.9,4.901c-0,2.705 2.196,4.901 4.9,4.901c2.705,0 4.901,-2.196 4.901,-4.901Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M60.666,24.892c1.902,-1.902 1.902,-4.99 0,-6.892l-0.04,-0.039c-1.901,-1.902 -4.989,-1.902 -6.891,-0c-1.901,1.901 -1.901,4.989 0,6.891l0.04,0.04c1.902,1.901 4.99,1.901 6.891,-0Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.737,61.103c1.909,-1.91 1.909,-5.011 -0,-6.921l-0.01,-0.01c-1.91,-1.91 -5.011,-1.91 -6.921,-0c-1.91,1.91 -1.91,5.011 -0,6.921l0.01,0.01c1.91,1.91 5.011,1.91 6.921,-0Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.676,54.167c-1.907,-1.907 -5.004,-1.907 -6.911,0l-0.02,0.02c-1.907,1.907 -1.907,5.004 0,6.911c1.907,1.907 5.004,1.907 6.911,-0l0.02,-0.02c1.907,-1.907 1.907,-5.004 0,-6.911Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M14.524,34.623c-2.702,0 -4.896,2.194 -4.896,4.896l0,0.01c0,2.702 2.194,4.896 4.896,4.896c2.702,0 4.896,-2.194 4.896,-4.896l0,-0.01c0,-2.702 -2.194,-4.896 -4.896,-4.896Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.216,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901c-0,2.704 2.196,4.9 4.9,4.9c2.705,0 4.901,-2.196 4.901,-4.9Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M25.734,17.943c-1.911,-1.911 -5.015,-1.911 -6.926,0l-0.005,0.005c-1.911,1.911 -1.911,5.015 0,6.926c1.911,1.911 5.015,1.911 6.926,0l0.005,-0.005c1.911,-1.911 1.911,-5.014 0,-6.926Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.103,34.623c-2.7,0 -4.892,2.192 -4.892,4.892l-0,0.019c-0,2.699 2.192,4.891 4.892,4.891c2.699,0 4.891,-2.192 4.891,-4.891l0,-0.019c0,-2.7 -2.192,-4.892 -4.891,-4.892Z" style="fill:#fff;"/></g></g></g></svg>
    </template>
</a>

<script>
(function() {
    const LOCAL_STORAGE_KEY = 'piccoloThemeMode'

    var initialMode = localStorage.getItem(LOCAL_STORAGE_KEY)

    if (initialMode) {
        // Make sure the value in local storage is valid
        if (['light', 'dark', 'darkest'].indexOf(initialMode) == -1) {
            initialMode = 'light'
            localStorage.setItem(LOCAL_STORAGE_KEY, initialMode)
        }
    } else {
        // Check if the client prefers dark mode
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            initialMode = 'dark'
        } else {
            initialMode = 'light'
        }
        localStorage.setItem(LOCAL_STORAGE_KEY, initialMode)
    }

    document.documentElement.dataset.mode = initialMode

    PetiteVue.createApp({
        'mode': initialMode,
        handleClick() {
            let currentMode = this.mode

            if (currentMode == 'light') {
                this.mode = 'dark'
            } else if (currentMode == 'dark') {
                this.mode = 'darkest'
            } else if (currentMode == 'darkest') {
                this.mode = 'light'
            }

            document.documentElement.dataset.mode = this.mode
            localStorage.setItem(LOCAL_STORAGE_KEY, this.mode)

            console.log(this.mode)
        }
    }).mount('#mode_toggle')
})()
</script>
            <p class="mobile_search_link">
                <a href="../search.html" title="Search">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 65 64" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2">
                        <path d="M14.873 40.009c-2.315-3.943-3.642-8.532-3.642-13.429C11.231 11.91 23.141 0 37.811 0s26.58 11.91 26.58 26.58-11.91 26.58-26.58 26.58a26.44 26.44 0 0 1-14.277-4.161L9.739 62.794a3.12 3.12 0 0 1-4.413 0L.913 58.382c-1.217-1.218-1.217-3.196 0-4.413l13.96-13.96zM37.811 8.054c10.225 0 18.526 8.301 18.526 18.526s-8.301 18.526-18.526 18.526-18.526-8.301-18.526-18.526S27.586 8.054 37.811 8.054z" fill="#fff" />
                    </svg>
                </a>
            </p>
        

        <div class="searchbox_wrapper">
            
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
    </nav>
</div>

    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whatsnew.html">What’s New</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/conceptual-overview.html">Conceptual Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">TLA+</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Core</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="setup.html">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="operators.html">Operators and Values</a></li>
<li class="toctree-l2"><a class="reference internal" href="pluscal.html">Writing Specifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="invariants.html">Writing an Invariant</a></li>
<li class="toctree-l2"><a class="reference internal" href="constants.html">Parameterizing Specs</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions.html">Structured Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="nondeterminism.html">Nondeterminism</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrency.html">Concurrency</a></li>
<li class="toctree-l2"><a class="reference internal" href="temporal-logic.html">Temporal Properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced-operators.html">More Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="action-properties.html">Action Properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="tla.html">TLA+</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="next-steps.html">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../topics/index.html">Topics</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html#pluscal-specs">PlusCal Specs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/standard-library.html">Standard Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/other-resources.html">Other Resources</a></li>
</ul>

<ul>
  <li class="toctree-l1"><a href= "../genindex.html">Index</a></li>
</ul>
        </div>
      </div>



    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="modules">
<span id="chapter-modules"></span><h1>Modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h1>
<p>I’m covering modules last because they’re not as important for organizing specs  as they are for organizing code. Most specs are under 300ish lines so you can keep them all in one file with little trouble.</p>
<p>That said, sometimes you want to create an abstract library like <code class="docutils literal notranslate"><span class="pre">LinkedLists</span></code>, and some people like putting their invariants in a separate file. So here’s how to modularize your spec.</p>
<section id="id1">
<h2>Modules<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>Shared TLA+ files should be in the same folder as your spec.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The toolbox has a config option (TLA+ Preferences &gt; TLA+ Library Path Functions) for reading modules from a shared directory. Any module in this directory can be used by all your specifications.</p>
</div>
<p>Once you have your module, how do you import it? There’s a couple of ways:</p>
<section id="extends">
<span id="index-0"></span><h3>EXTENDS<a class="headerlink" href="#extends" title="Permalink to this headline">¶</a></h3>
<p>This is what we’ve been using. Everything on the <code class="docutils literal notranslate"><span class="pre">EXTENDS</span></code> line is dumped into the same namespace as your file. If <code class="docutils literal notranslate"><span class="pre">Sequences</span></code> defines an <code class="docutils literal notranslate"><span class="pre">Append</span></code> operator, then <code class="docutils literal notranslate"><span class="pre">EXTEND</span> <span class="pre">Sequences</span></code> drops <code class="docutils literal notranslate"><span class="pre">Append</span></code> into your spec.</p>
<p><em>Unless</em> the operator is <code class="docutils literal notranslate"><span class="pre">LOCAL</span></code>. If you write</p>
<div class="highlight-tla notranslate"><div class="highlight"><pre><span></span><span class="n">LOCAL</span> <span class="n">Op</span> <span class="o">==</span> <span class="s">&quot;definition&quot;</span>
</pre></div>
</div>
<p>Then <code class="docutils literal notranslate"><span class="pre">Op</span></code> will not be imported when extended.</p>
<p>And that’s all there is to say about extensions! Let’s talk about the much more interesting module mechanism, instances.</p>
</section>
</section>
<section id="instance">
<span id="index-1"></span><span id="id2"></span><h2>INSTANCE<a class="headerlink" href="#instance" title="Permalink to this headline">¶</a></h2>
<p>This deserves a bigger header because <code class="docutils literal notranslate"><span class="pre">INSTANCE</span></code> is way more interesting than <code class="docutils literal notranslate"><span class="pre">EXTENDS</span></code>. If you write</p>
<div class="highlight-tla notranslate"><div class="highlight"><pre><span></span><span class="kn">INSTANCE</span> <span class="n">Sequences</span>
</pre></div>
</div>
<p>Then <code class="docutils literal notranslate"><span class="pre">Sequences</span></code> is dumped into the file namespace, just like before. So why would you want to use it? There’s a couple minor differences between <code class="docutils literal notranslate"><span class="pre">INSTANCE</span></code> and <code class="docutils literal notranslate"><span class="pre">EXTENDS</span></code>:</p>
<ol class="arabic simple">
<li><p>You can have more than one <code class="docutils literal notranslate"><span class="pre">INSTANCE</span></code> line in a spec, while all your <code class="docutils literal notranslate"><span class="pre">EXTENDS</span></code> have to be on the same line.</p></li>
<li><p>You can import an instance “locally” with <code class="docutils literal notranslate"><span class="pre">LOCAL</span> <span class="pre">INSTANCE</span></code>. Then the imported module is available, but imported operators won’t be transitively included another spec.</p></li>
</ol>
<blockquote>
<div><p>(You can see this used in <code class="docutils literal notranslate"><span class="pre">Sequences.tla</span></code>, which locally imports Naturals.)</p>
</div></blockquote>
<p>And there’s also a couple of major differences.</p>
<section id="namespacing">
<h3>Namespacing<a class="headerlink" href="#namespacing" title="Permalink to this headline">¶</a></h3>
<p>As anybody who’s worked with Python or C++ or anything that allows unqualified imports knows, you really don’t want to dump everything into the file namespace. That gets everybody mad! You can namespace the operators in an instance like this:</p>
<div class="highlight-tla notranslate"><div class="highlight"><pre><span></span><span class="n">Foo</span> <span class="o">==</span> <span class="kn">INSTANCE</span> <span class="n">Sequences</span>
</pre></div>
</div>
<p id="index-2">Namespace lookup is done with <code class="docutils literal notranslate"><span class="pre">!</span></code>. So instead of writing <code class="docutils literal notranslate"><span class="pre">Append(seq,</span> <span class="pre">1)</span></code>, you’d write <code class="docutils literal notranslate"><span class="pre">Foo!Append(seq,</span> <span class="pre">1)</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Yes, you can import a module in the middle of a <a class="reference internal" href="operators.html#let"><span class="std std-ref">LET</span></a>.</p>
<div class="highlight-tla notranslate"><div class="highlight"><pre><span></span><span class="k k-Conditional">LET</span> <span class="n">Foo</span> <span class="o">==</span> <span class="kn">INSTANCE</span> <span class="n">Sequences</span>
<span class="n">IN</span> <span class="n">Foo!Append</span><span class="p">(</span><span class="n">seq</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>In fact you can import the same module multiple times under different names:</p>
<div class="highlight-tla notranslate"><div class="highlight"><pre><span></span><span class="n">Foo</span> <span class="o">==</span> <span class="kn">INSTANCE</span> <span class="n">Sequences</span>
<span class="n">Bar</span> <span class="o">==</span> <span class="kn">INSTANCE</span> <span class="n">Sequences</span>
</pre></div>
</div>
<p>Why would you want to do that? Well, it wouldn’t be useful with the standard library functions, but if your imported module has some constants… well, that’s where things get interesting.</p>
</section>
<section id="parameterized-modules">
<span id="index-3"></span><h3>Parameterized Modules<a class="headerlink" href="#parameterized-modules" title="Permalink to this headline">¶</a></h3>
<p>Here’s a new module:</p>
<div class="highlight-tla notranslate"><div class="highlight"><pre><span></span><span class="c c-PreProc">----</span> <span class="c c-PreProc">MODULE</span> <span class="c c-PreProc">Point</span> <span class="c c-PreProc">----</span>
<span class="n">LOCAL</span> <span class="kn">INSTANCE</span> <span class="n">Integers</span>
<span class="kn">CONSTANTS</span> <span class="n">X</span><span class="p">,</span> <span class="n">Y</span>
<span class="kn">ASSUME</span> <span class="n">X</span> <span class="s">\in</span> <span class="n">Int</span> <span class="o">/\</span> <span class="n">Y</span> <span class="s">\in</span> <span class="n">Int</span>

<span class="n">Repr</span> <span class="o">==</span> <span class="o">&lt;&lt;</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="o">&gt;&gt;</span>
<span class="n">Add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="o">==</span> <span class="o">&lt;&lt;</span><span class="n">X</span> <span class="o">+</span> <span class="n">x</span><span class="p">,</span> <span class="n">Y</span> <span class="o">+</span> <span class="n">y</span><span class="o">&gt;&gt;</span>
<span class="c c-PreProc">====</span>
</pre></div>
</div>
<p>Unlike previous modules we’ve seen, this one contains constants. When we import it with <code class="docutils literal notranslate"><span class="pre">WITH</span></code>, we need to define what those constants are. We do it like this:</p>
<div class="highlight-tla notranslate" id="with-tla"><span id="index-4"></span><div class="highlight"><pre><span></span><span class="n">Origin</span> <span class="o">==</span> <span class="kn">INSTANCE</span> <span class="n">Point</span> <span class="kn">WITH</span> <span class="n">X</span> <span class="o">&lt;-</span> <span class="m">0</span><span class="p">,</span> <span class="n">Y</span> <span class="o">&lt;-</span> <span class="m">0</span>
</pre></div>
</div>
<p>This effectively “rewrites” all of the operators in <code class="docutils literal notranslate"><span class="pre">Point</span></code> to use the passed in values. Now <code class="docutils literal notranslate"><span class="pre">Origin!Add(x,</span> <span class="pre">y)</span> <span class="pre">==</span> <span class="pre">&lt;&lt;0</span> <span class="pre">+</span> <span class="pre">x,</span> <span class="pre">0</span> <span class="pre">+</span> <span class="pre">y&gt;&gt;</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If the importing module has a constant with the same name as the child model, it will be imported by default. For example, if both modules contain a <code class="docutils literal notranslate"><span class="pre">DEBUG</span></code> constant, the following two are equivalent:</p>
<div class="highlight-tla notranslate"><div class="highlight"><pre><span></span><span class="n">M</span> <span class="o">==</span> <span class="kn">INSTANCE</span> <span class="n">Module</span> <span class="kn">WITH</span> <span class="n">DEBUG</span> <span class="o">&lt;-</span> <span class="n">DEBUG</span>
<span class="n">M</span> <span class="o">==</span> <span class="kn">INSTANCE</span> <span class="n">Module</span>
</pre></div>
</div>
<p>(You can still provide your own value in the <code class="docutils literal notranslate"><span class="pre">WITH</span></code> as an override.)</p>
</div>
</section>
<section id="partial-parameterization">
<h3>Partial Parameterization<a class="headerlink" href="#partial-parameterization" title="Permalink to this headline">¶</a></h3>
<p>We can also write this:</p>
<div class="highlight-tla notranslate"><div class="highlight"><pre><span></span><span class="n">XAxis</span><span class="p">(</span><span class="n">X</span><span class="p">)</span> <span class="o">==</span> <span class="kn">INSTANCE</span> <span class="n">Point</span> <span class="kn">WITH</span> <span class="n">Y</span> <span class="o">&lt;-</span> <span class="m">0</span>
</pre></div>
</div>
<p>Now instead of <code class="docutils literal notranslate"><span class="pre">XAxis!Add(x,</span> <span class="pre">y)</span></code>, we write <code class="docutils literal notranslate"><span class="pre">XAxis(v)!Add(x,</span> <span class="pre">y)</span></code>, which defines what the <code class="docutils literal notranslate"><span class="pre">X</span></code> constant “should be” at runtime. eg <code class="docutils literal notranslate"><span class="pre">XAxis(2)!Add(x,</span> <span class="pre">y)</span> <span class="pre">==</span> <span class="pre">&lt;&lt;2</span> <span class="pre">+</span> <span class="pre">x,</span> <span class="pre">0</span> <span class="pre">+</span> <span class="pre">y&gt;&gt;</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>I haven’t yet converted it into a proper topic, but <a class="reference external" href="https://hillelwayne.com/post/tla-adt/">this article of mine</a> covers a set of techniques where partial parameterization is useful.</p>
</div>
</section>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>EXTENDS will not import any operators prefixed with <code class="docutils literal notranslate"><span class="pre">LOCAL</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">INSTANCE</span></code> is like <code class="docutils literal notranslate"><span class="pre">EXTEND</span></code>, except it can be namespaced. Namespaced operators are called with  <code class="docutils literal notranslate"><span class="pre">I!operator</span></code>.</p></li>
<li><p>You can instantiate modules with constants and pass them in at instantiation. You can also partially instantiate a module, and pass in the remaining values when calling an operator.</p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
    
        <div id="show_right_sidebar">
            <p><a class="toggle_right_sidebar" href="#"><span class="icon">&lt;</span><span>Page contents</span></a></p>
        </div>

        <div id="right_sidebar">
            <p><a class="toggle_right_sidebar" href="#"><span class="icon">&gt;</span><span>Page contents:</span></a></p>
            <div class="page_toc">
                <ul>
<li><a class="reference internal" href="#">Modules</a><ul>
<li><a class="reference internal" href="#id1">Modules</a><ul>
<li><a class="reference internal" href="#extends">EXTENDS</a></li>
</ul>
</li>
<li><a class="reference internal" href="#instance">INSTANCE</a><ul>
<li><a class="reference internal" href="#namespacing">Namespacing</a></li>
<li><a class="reference internal" href="#parameterized-modules">Parameterized Modules</a></li>
<li><a class="reference internal" href="#partial-parameterization">Partial Parameterization</a></li>
</ul>
</li>
<li><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
</ul>

            </div>
        </div>
    

      <div class="clearer"></div>
    </div>
    <div class="button_nav_wrapper">
        <div class="button_nav">
            <div class="left">
                
                <a href="tla.html">
                    <span class="icon">&lt;</span><span>TLA+</span></a>
                
            </div>

            <div class="right">
                
                    <a href="next-steps.html"><span>Next Steps</span><span class="icon">&gt;</span></a>
                
            </div>
        </div>
    </div>


    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, Hillel Wayne.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.4.0.
    </div>

<p id="theme_credit">Styled using the <a href="https://github.com/piccolo-orm/piccolo_theme">Piccolo Theme</a></p>
  </body>
</html>